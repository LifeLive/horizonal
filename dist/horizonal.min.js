/*! horizonal 17-07-2014 */
!function(a,b){function c(){function c(c){var e=a(b).scrollTop();q=a.extend({},w,c),u||(s=a(q.rootElement),t=s.clone(),n()),r(),d(e),f(),""!==b.location.hash&&k()}function e(){v||(s.replaceWith(t.clone()),o(),v=!0)}function l(){v&&(g(),n(),""!==b.location.hash&&k(),v=!1)}function m(a){var b;"#"===a.substr(0,1)?k(a):(b=a,p.showPage(b))}function n(){a(b).on("resize",h(g,250)),a(b).on("keydown",i),a(b).on("scroll",j),a(b).on("hashchange",k)}function o(){a(b).off("resize",h(g,250)),a(b).off("keydown",i),a(b).off("scroll",j),a(b).off("hashchange",k)}function r(){var b;q.customCssFile&&(b=a("#hrz-custom-css"),0<b.length?b.attr("href",q.customCssFile):a("head").append('<link rel="stylesheet" id="hrz-custom-css" href="'+q.customCssFile+'" type="text/css" />'))}var u=!1,v=!1,w={selector:"h1, h2, h3, h4, h5, h6, p, li, img, table",stagger:"random",staggerDelay:.1,customCssFile:!1,displayScrollbar:!0,scrollStep:2,pageMargin:20,displayPageCount:!0,rootElement:"body",pageHideDelay:1};return{init:c,enable:l,disable:e,goTo:m}}function d(c){s=a(q.rootElement),s.wrapInner('<div id="hrz-container"></div>'),r=a("#hrz-container"),r.width(s.width()),u=a(b).height()-2*q.pageMargin;var d=new m(q.selector);p=d.splitIntoPages(),p.renderToDom(c),r.children().not(".hrz-page").filter(":visible").remove();var f=p.last().bottom/q.scrollStep+u;s.height(f),q.displayScrollbar||s.css("overflow-y","hidden"),e()}function e(){if(0===a(".hrz-page-count").length){var b=a('<div class="hrz-page-count"></div>');a("body").append(b),b.append('<span id="hrz-current-page"></span> / <span id="hrz-total-pages"></span>'),a("#hrz-total-pages").html(p.length),q.displayPageCount||b.addClass("hidden")}}function f(){a("#hrz-current-page").html(p.currentPage)}function g(){var c=p.getCurrent().nodes[0].layout.top/q.scrollStep;s.replaceWith(t.clone()),d(c),a(b).scrollTop(c),f()}function h(a,b){var c;return function(){clearTimeout(c),c=setTimeout(function(){a()},b)}}function i(c){var d;40===c.which||39===c.which?d=p.getCurrent().bottom/q.scrollStep+10:(38===c.which||37===c.which)&&(d=p.getPrevious().top/q.scrollStep+2*q.pageMargin+10),void 0!==d&&a(b).scrollTop(d)}function j(){var c=a(b).scrollTop(),d=p.currentPage,e=p.getPageAtOffset(c*q.scrollStep).pageNumber;e!==d&&(p.showPage(e),f())}function k(){var c=b.location.hash;if(""!==c){var d=a(c).closest(".hrz-page"),e=parseInt(d.attr("id").replace(/^\D+/g,""));p.showPage(e),a(b).scrollTop(p.getCurrent().top/q.scrollStep),f()}}function l(a,b){this.domNode=a,this.index=b,this.isClone=!1,this.layout=this.getLayout(),this.isTall=!1,this.pageOverhang=0,this.originalComputedStyle=this.cloneComputedStyle(),this.staggerOrder=0}function m(a){"undefined"!=typeof a&&this.fromSelector(a)}function n(a){this.top=0,this.bottom=0,this.height=0,this.nodes=new m,this.pageNumber=a||0,this.domNode=null,this.hideTimer=null,Object.defineProperty(this,"pageId",{get:function(){return"hrz-page-"+this.pageNumber}})}function o(){var a=1;Object.defineProperty(this,"currentPage",{get:function(){return a},set:function(b){a=this.last()<b?this.last():1>b?1:b}})}var p,q,r,s,t,u;b.horizonal=new c,l.prototype={cloneComputedStyle:function(){var c=b.getComputedStyle(this.domNode);return a.extend({},c)},getLayout:function(){var b=a(this.domNode),c=b.offset().left-s.offset().left,d=b.position().top-s.offset().top,e=b.width()+parseInt(b.css("padding-left"))+parseInt(b.css("padding-right")),f=b.height()+parseInt(b.css("padding-top"))+parseInt(b.css("padding-bottom")),g=d+f;return{top:d,left:c,bottom:g,width:e,height:f}},makeClone:function(b){var c=a(this.domNode).clone()[0],d=new l(c,b);return d.layout={top:this.layout.top,left:this.layout.left,width:this.layout.width,height:this.layout.height,bottom:this.layout.bottom},d.isClone=!0,d},renderToDom:function(b){a(this.domNode).addClass(b.pageId),a("#"+b.pageId).append(this.domNode),this.applyStyleDiff();var c="";b.pageNumber<p.currentPage?c="hrz-back":p.currentPage<b.pageNumber&&(c="hrz-fore"),a(this.domNode).addClass("hrz-element "+c),this.setCssPosition(b.top),this.setTransitionDelay()},applyStyleDiff:function(){var b=this.getStyleDiff();a(this.domNode).css(b)},setCssPosition:function(b){var c=1===this.page?0:q.pageMargin;a(this.domNode).css({position:"fixed",top:this.layout.top-b+c+"px",left:this.layout.left+"px",width:this.layout.width+"px",height:this.layout.height+"px"})},setTransitionDelay:function(){function c(a){return"undefined"!=typeof a?a.replace(/(\S+\s)([0-9\.]+)s(,|$)/g,function(a,b,c,e){var f=parseInt(c)+d;return b+f+"s"+e}):""}var d=this.getStaggerDelay(),e=b.getComputedStyle(this.domNode).transition,f=b.getComputedStyle(this.domNode)["-webkit-transition"];e=c(e),f=c(f),a(this.domNode).css({transition:e,"-webkit-transition":f})},getStyleDiff:function(){var c={},d=b.getComputedStyle(this.domNode),e=this;return a.each(d,function(a,b){var f=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});d[b]!=e.originalComputedStyle[f]&&(c[b]=e.originalComputedStyle[f])}),c},getStaggerDelay:function(){var a=q.staggerDelay*this.staggerOrder;return Math.round(100*a)/100},moveToForeground:function(){a(this.domNode).removeClass("hrz-back").addClass("hrz-fore")},moveToBackground:function(){a(this.domNode).removeClass("hrz-fore").addClass("hrz-back")},moveToFocus:function(){a(this.domNode).removeClass("hrz-fore hrz-back")}};var v={fromSelector:function(b){var c=this,d=a(b).filter(":visible");d.each(function(a,b){var d=new l(b,a);c.push(d)})},splitIntoPages:function(){var a,b=1,c=new o;for(a=0;a<this.length;a++){var d=this[a],e=c.getLastOffset()+u,f=u/2<d.layout.height&&e<d.layout.bottom;if(f&&!d.isClone){d.isTall=!0;for(var g=d.layout.bottom-e,h=1;g>0;){var i=a+h,j=d.makeClone(i);j.pageOverhang=g,this.splice(i,0,j),g-=u,h++}}b=this.calculateLastPageAndPageOffset(d,c,b),c.getPage(b).addNode(d)}return c},calculateLastPageAndPageOffset:function(a,b,c){if(void 0!==b[c-1]){var d=b.getPage(c),e=d.top+u;if(d.bottom<=a.layout.bottom){var f=e<a.layout.bottom;if(a.isTall)f&&(d.bottom=e);else if(f||a.isClone){c++,b.add();var g=b.last();u<a.layout.height?(g.bottom=e,a.pageOverhang&&(g.bottom+=Math.min(a.pageOverhang,u))):g.bottom=a.layout.bottom}else d.bottom=a.layout.bottom}}else b.add(),b.last().bottom=a.layout.bottom;return c},renderToDom:function(a){for(var b=[],c=1;c<=this.length;c++)b.push(c);"random"===q.stagger&&(b=this.shuffle(b)),this.forEach(function(c,d){c.staggerOrder=b[d],c.renderToDom(a)})},shuffle:function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a}};m.prototype=[],a.extend(m.prototype,v),n.prototype={addNode:function(a){this.nodes.push(a)},renderToDom:function(b){var c="";this.pageNumber<b?c="hrz-back hrz-hidden":b<this.pageNumber&&(c="hrz-fore hrz-hidden"),r.append('<div class="hrz-page '+c+'" id="'+this.pageId+'" />'),this.domNode=a("#"+this.pageId)[0],this.nodes.renderToDom(this)},moveToForeground:function(){a(this.domNode).removeClass("hrz-back").addClass("hrz-fore"),this.hideAfterDelay(),this.nodes.forEach(function(a){a.moveToForeground()})},moveToBackground:function(){a(this.domNode).removeClass("hrz-fore").addClass("hrz-back"),this.hideAfterDelay(),this.nodes.forEach(function(a){a.moveToBackground()})},moveToFocus:function(){a(this.domNode).removeClass("hrz-fore hrz-back hrz-hidden"),null!==this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=null),this.nodes.forEach(function(a){a.moveToFocus()})},hideAfterDelay:function(){var b=a(this.domNode);this.hideTimer=setTimeout(function(){b.addClass("hrz-hidden")},1e3*q.pageHideDelay)}};var w={getPage:function(a){return a>0&&a<=this.length?this[a-1]:new n},getCurrent:function(){return this.getPage(this.currentPage)},getPrevious:function(){return this.getPage(this.currentPage-1)},add:function(){var a=this.length+1,b=new n(a);b.top=this.getPage(this.length).bottom,this.push(b)},last:function(){return this[this.length-1]},getLastOffset:function(){return this.length<=1?0:this.last().top},getPageAtOffset:function(a){return this.filter(function(b){return b.top<=a&&a<b.bottom})[0]},renderToDom:function(a){var b=this;a=a||0,this.currentPage=this.getPageAtOffset(a*q.scrollStep).pageNumber,this.forEach(function(a){a.renderToDom(b.currentPage)})},showPage:function(a){var b=this.currentPage;this.currentPage=a;var c=this.currentPage;if(0===b)this.getPage(c).moveToFocus();else{var d;if(c>b){for(d=b;c>d;d++)this.getPage(d).moveToBackground();this.getPage(c).moveToFocus()}else if(b>c){for(d=b;d>c;d--)this.getPage(d).moveToForeground();this.getPage(c).moveToFocus()}}}};o.prototype=[],a.extend(o.prototype,w)}(jQuery,window,document);