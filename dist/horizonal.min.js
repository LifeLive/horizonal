/*! horizonal 06-07-2014 */
var horizonal=function(a,b){function c(b){n=a.extend({},p,b),k=1,j=a(n.selector),a("body").wrapInner('<div id="hrz-container"><div class="hrz-page"></div></div>'),j.addClass("hrz-element hrz-fore"),d(j),g(),f(k)}function d(c){var d,f,g=0;f=a(b).height()-2*o,m=[0],l=1,c.each(function(b,c){var d,e=a(c),h=e.offset().left,i=e.offset().top-parseInt(e.css("margin-top")),j=e.width(),k=e.height(),n=i+k;void 0!==m[l]?m[l]<n&&(d=void 0===m[l-1]?0:m[l-1],n>d+f?(l++,g=0):m[l]=n):m[l]=n,e.addClass("hrz-page-"+l),c.hrzPage=l,c.pageOrder=g,g++,c.hrzCssPosition={top:i,left:h,width:j,height:k}}),c.each(function(b,c){var d=a(c),f=c.hrzCssPosition,g=m[c.hrzPage-1],h=e(c),i=1===c.hrzPage?0:o;d.css({position:"fixed",top:f.top-g+i+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px",transition:"transform "+h+"s, opacity "+h+"s","-webkit-transition":"-webkit-transform "+h+"s, opacity "+h+"s"})}),d=m[m.length-1]+f,a("body").height(d)}function e(a){var b;return b="random"===n.stagger?.5*Math.random()+.7:"sequence"===n.stagger?Math.log(a.pageOrder+2):1,b/n.transitionSpeed}function f(b){j.each(function(c,d){d.hrzPage<b?a(d).addClass("hrz-back"):b<d.hrzPage?a(d).addClass("hrz-fore"):a(d).removeClass("hrz-fore hrz-back")})}function g(){n.customCssFile&&(0<a("#hrz-custom-css").length?a("#hrz-custom-css").attr("href",n.customCssFile):a("head").append('<link rel="stylesheet" id="hrz-custom-css" href="'+n.customCssFile+'" type="text/css" />'))}function h(a){var b="hrz-page-",c=a.className.split(" ").filter(function(a){return 0!==a.lastIndexOf(b,0)});a.className=c.join(" ")}function i(b){a(b).removeAttr("style")}var j,k,l,m,n,o=20,p={selector:"body *:not(:has(*))",stagger:"random",transitionSpeed:1,customCssFile:!1};return a(b).on("resize",function(){void 0!==j&&(j.each(function(a,b){h(b),i(b)}),d(j),f(k))}),a(b).on("scroll",function(){var c=a(b).scrollTop(),d=0===k?0:m[k-1],e=m[k];d>c?(k--,f(k)):c>e&&(k++,f(k))}),a(b).on("keydown",function(c){var d;40===c.which||39===c.which?k!==l&&(d=m[k]+10):(38===c.which||37===c.which)&&(d=1===k?m[k-1]:m[k-2]),void 0!==d&&a(b).scrollTop(d)}),{init:c}}(jQuery,window,document);