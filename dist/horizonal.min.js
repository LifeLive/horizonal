/*! horizonal 12-07-2014 */
var horizonal=function(a,b){function c(b){q=a.extend({},r,b),o=1,m=a("body").clone(),n=a(q.selector).filter(":visible"),e(n),h(),g(o),d()}function d(){a(b).on("resize",j(i,500)),a(b).on("keydown",k),a(b).on("scroll",l)}function e(c){function d(b,c,d,e){c.isTall=!0;for(var f=c.bottom-e,g=1;f>0;){var j=a(b).clone()[0];a(j).attr("data-is-clone",!0),d.splice(h+g,0,j),j.hrz={},j.hrz.cssPosition={top:c.top,left:c.left,width:c.width,height:c.height},j.hrz.isClone=!0,j.hrz.pageOverhang=f,f-=i,g++}}function e(b){var c=a(b),d=b.hrz.cssPosition?b.hrz.cssPosition.left:c.offset().left,e=b.hrz.cssPosition?b.hrz.cssPosition.top:c.offset().top-parseInt(c.css("margin-top")),f=b.hrz.cssPosition?b.hrz.cssPosition.width:c.width(),g=b.hrz.cssPosition?b.hrz.cssPosition.height:c.height(),h=e+g;return{top:e,left:d,bottom:h,width:f,height:g,isTall:!1}}function g(a){if(void 0!==p[k]){if(p[k]<=r.bottom){var b=o<r.bottom;r.isTall?b&&(p[k]=o):b||a.hrz.isClone?(k++,i<r.height?(p[k]=o,a.hrz.pageOverhang&&(p[k]+=Math.min(a.hrz.pageOverhang,i))):p[k]=r.bottom,j=0):p[k]=r.bottom}}else p[k]=r.bottom}var h,i=a(b).height()-2*q.pageMargin,j=0,k=1,l=a("body");for(p=[0],l.wrapInner('<div id="hrz-container"></div>'),h=0;h<c.length;h++){var m=c[h];m.hrz=m.hrz||{};var n=void 0===p[k-1]?0:p[k-1],o=n+i,r=e(m),s=i/2<r.height&&o<r.bottom;s&&m.hrz.isClone!==!0&&d(m,r,c,o),g(m),a(m).addClass("hrz-page-"+k),m.hrz.page=k,m.hrz.pageOrder=j,j++,m.hrz.cssPosition={top:r.top,left:r.left,width:r.width,height:r.height}}a.each(p,function(b){0!==b&&a("#hrz-container").prepend('<div class="hrz-page" id="hrz-page-'+b+'" />')}),c.each(function(b,c){var d=a(c),e=c.hrz.cssPosition,g=p[c.hrz.page-1],h=f(c),i=1===c.hrz.page?0:q.pageMargin;d.css({position:"fixed",top:e.top-g+i+"px",left:e.left+"px",width:e.width+"px",height:e.height+"px",transition:"transform "+h+"s, opacity "+h+"s","-webkit-transition":"-webkit-transform "+h+"s, opacity "+h+"s"}),a("#hrz-page-"+c.hrz.page).append(d)}),c.addClass("hrz-element hrz-fore");var t=p[p.length-1]+i;l.height(t),q.displayScrollbar||l.css("overflow-y","hidden"),a("#hrz-container > *").not(".hrz-page").filter(":visible").remove()}function f(a){var b;return b="random"===q.stagger?.5*Math.random()+.7:"sequence"===q.stagger?Math.log(a.hrz.pageOrder+2):1,b/q.transitionSpeed}function g(b){for(var c=p.length-1,d=1;c>=d;d++)b>d?a("#hrz-page-"+d).addClass("hrz-back"):d>b?a("#hrz-page-"+d).addClass("hrz-fore"):a("#hrz-page-"+d).removeClass("hrz-fore hrz-back");n.each(function(c,d){d.hrz.page<b?a(d).addClass("hrz-back"):b<d.hrz.page?a(d).addClass("hrz-fore"):a(d).removeClass("hrz-fore hrz-back")})}function h(){var b;q.customCssFile&&(b=a("#hrz-custom-css"),0<b.length?b.attr("href",q.customCssFile):a("head").append('<link rel="stylesheet" id="hrz-custom-css" href="'+q.customCssFile+'" type="text/css" />'))}function i(){a("body").replaceWith(m.clone()),n=a(q.selector).filter(":visible"),e(n),g(o)}function j(a,b){var c;return function(){clearTimeout(c),c=setTimeout(function(){a()},b)}}function k(c){var d,e=p.length-1;40===c.which||39===c.which?o!==e&&(d=p[o]+10):(38===c.which||37===c.which)&&(d=1===o?p[o-1]:p[o-2]),void 0!==d&&a(b).scrollTop(d)}function l(){var c=a(b).scrollTop(),d=0===o?0:p[o-1],e=p[o];d>c?(o--,g(o)):c>e&&(o++,g(o))}var m,n,o,p,q,r={selector:"body *:not(:has(*))",stagger:"random",transitionSpeed:1,customCssFile:!1,displayScrollbar:!0,pageMargin:20};return{init:c}}(jQuery,window,document);