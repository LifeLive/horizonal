/*! horizonal 07-07-2014 */
var horizonal=function(a,b){function c(b){o=a.extend({},q,b),l=1,j=a("body").clone(),k=a(o.selector).filter(":visible"),d(k),g(),f(l)}function d(c){var d,f,g=0;f=a(b).height()-2*p,n=[0],m=1,a("body").wrapInner('<div id="hrz-container"></div>'),c.each(function(b,c){var d,e=a(c),h=e.offset().left,i=e.offset().top-parseInt(e.css("margin-top")),j=e.width(),k=e.height(),l=i+k;void 0!==n[m]?n[m]<l&&(d=void 0===n[m-1]?0:n[m-1],l>d+f?(m++,g=0):n[m]=l):n[m]=l,e.addClass("hrz-page-"+m),c.hrzPage=m,c.pageOrder=g,g++,c.hrzCssPosition={top:i,left:h,width:j,height:k}}),a.each(n,function(b){0!==b&&a("#hrz-container").prepend('<div class="hrz-page" id="hrz-page-'+b+'" />')}),c.each(function(b,c){var d=a(c),f=c.hrzCssPosition,g=n[c.hrzPage-1],h=e(c),i=1===c.hrzPage?0:p;d.css({position:"fixed",top:f.top-g+i+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px",transition:"transform "+h+"s, opacity "+h+"s","-webkit-transition":"-webkit-transform "+h+"s, opacity "+h+"s"}),a("#hrz-page-"+c.hrzPage).append(d)}),c.addClass("hrz-element hrz-fore"),d=n[n.length-1]+f,a("body").height(d),o.displayScrollbar||a("body").css("overflow-y","hidden")}function e(a){var b;return b="random"===o.stagger?.5*Math.random()+.7:"sequence"===o.stagger?Math.log(a.pageOrder+2):1,b/o.transitionSpeed}function f(b){for(var c=1;m>=c;c++)b>c?a("#hrz-page-"+c).addClass("hrz-back"):c>b?a("#hrz-page-"+c).addClass("hrz-fore"):a("#hrz-page-"+c).removeClass("hrz-fore hrz-back");k.each(function(c,d){d.hrzPage<b?a(d).addClass("hrz-back"):b<d.hrzPage?a(d).addClass("hrz-fore"):a(d).removeClass("hrz-fore hrz-back")})}function g(){o.customCssFile&&(0<a("#hrz-custom-css").length?a("#hrz-custom-css").attr("href",o.customCssFile):a("head").append('<link rel="stylesheet" id="hrz-custom-css" href="'+o.customCssFile+'" type="text/css" />'))}function h(){a("body").replaceWith(j.clone()),k=a(o.selector).filter(":visible"),d(k),f(l)}function i(a,b){var c;return function(){clearTimeout(c),c=setTimeout(function(){a()},b)}}var j,k,l,m,n,o,p=20,q={selector:"body *:not(:has(*))",stagger:"random",transitionSpeed:1,customCssFile:!1,displayScrollbar:!0};return a(b).on("resize",i(h,500)),a(b).on("scroll",function(){var c=a(b).scrollTop(),d=0===l?0:n[l-1],e=n[l];d>c?(l--,f(l)):c>e&&(l++,f(l))}),a(b).on("keydown",function(c){var d;40===c.which||39===c.which?l!==m&&(d=n[l]+10):(38===c.which||37===c.which)&&(d=1===l?n[l-1]:n[l-2]),void 0!==d&&a(b).scrollTop(d)}),{init:c}}(jQuery,window,document);