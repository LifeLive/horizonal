/*! horizonal 06-07-2014 */
var horizonal=function(a,b){function c(c){var n,o,p=0;k=a.extend({},m,c),i=0,h=0,g=a(k.selector),a("head").append("<style type='text/css' id='hrz-custom-styles'></style>"),a("body").wrapInner('<div id="hrz-container"><div class="hrz-page"></div></div>'),g.addClass("hrz-element hrz-fore"),j=[],n=a(b).height()-2*l,g.each(function(b,c){var d=a(c),e=d.offset().left,f=d.offset().top-parseInt(d.css("margin-top")),g=d.width(),h=d.height(),k=f+h;if(void 0!==j[i]){if(j[i]<k){var l=void 0===j[i-1]?0:j[i-1];k>l+n?(i++,p=0):j[i]=k}}else j[i]=k;d.addClass("hrz-page-"+i),c.hrzPage=i,c.pageOrder=p,p++,c.hrzCssPosition={top:f,left:e,width:g,height:h}}),g.each(function(b,c){var e=a(c),f=c.hrzCssPosition,g=0===c.hrzPage?0:j[c.hrzPage-1],h=d(c),i=0===c.hrzPage?0:l;e.css({position:"fixed",top:f.top-g+i+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px",transition:"transform "+h+"s, opacity "+h+"s","-webkit-transition":"-webkit-transform "+h+"s, opacity "+h+"s"})}),o=j[j.length-1]+n,a("body").height(o),f(),e(h)}function d(a){var b;return b="random"===k.stagger?.5*Math.random()+.7:"sequence"===k.stagger?Math.log(a.pageOrder+2):1,b/k.transitionSpeed}function e(b){g.each(function(c,d){d.hrzPage<b?a(d).addClass("hrz-back"):b<d.hrzPage?a(d).addClass("hrz-fore"):a(d).removeClass("hrz-fore hrz-back")})}function f(){var b;k.perspective!=m.perspective&&(b=".hrz-page {-webkit-perspective: "+k.perspective+"px; perspective: "+k.perspective+"px;}"),a("#hrz-custom-styles").html(b)}var g,h,i,j,k,l=20,m={selector:"body *:not(:has(*))",stagger:"random",transitionSpeed:1,perspective:500};return a(b).on("scroll",function(){var c=a(b).scrollTop(),d=0===h?0:j[h-1],f=j[h];d>c?(h--,e(h)):c>f&&(h++,e(h))}),{init:c}}(jQuery,window,document);