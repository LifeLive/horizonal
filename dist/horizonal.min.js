/*! horizonal 11-07-2014 */
var horizonal=function(a,b){function c(b){q=a.extend({},s,b),n=1,l=a("body").clone(),m=a(q.selector).filter(":visible"),d(m),g(),f(n)}function d(c){var d,f,g=0;f=a(b).height()-2*r,p=[0],o=1,a("body").wrapInner('<div id="hrz-container"></div>');for(var h=c.length,i=0;h>i;i++){var j=c[i],k=void 0===p[o-1]?0:p[o-1],l=k+f,m=a(j),n=j.hrzCssPosition?j.hrzCssPosition.left:m.offset().left,s=j.hrzCssPosition?j.hrzCssPosition.top:m.offset().top-parseInt(m.css("margin-top")),t=j.hrzCssPosition?j.hrzCssPosition.width:m.width(),u=j.hrzCssPosition?j.hrzCssPosition.height:m.height(),v=!1;j.hrzOverhang;var w=s+u;if(u>f/2&&w>l&&j.hrzIsClone!==!0){v=!0;for(var x=w-l,y=1;x>0;){var z=m.clone()[0];a(z).attr("data-is-clone",!0),c.splice(i+y,0,z),h++,z.hrzCssPosition={top:s,left:n,width:t,height:u},z.hrzIsClone=!0,z.hrzOverhang=x,x-=f,y++}}if(void 0!==p[o]){if(p[o]<=w){var A=w>k+f;v?A&&(p[o]=k+f):A||j.hrzIsClone?(o++,u>f?(p[o]=k+f,j.hrzOverhang&&(p[o]+=Math.min(j.hrzOverhang,f))):p[o]=w,g=0):p[o]=w}}else p[o]=w;m.addClass("hrz-page-"+o),j.hrzPage=o,j.pageOrder=g,g++,j.hrzCssPosition={top:s,left:n,width:t,height:u}}a.each(p,function(b){0!==b&&a("#hrz-container").prepend('<div class="hrz-page" id="hrz-page-'+b+'" />')}),c.each(function(b,c){var d=a(c),f=c.hrzCssPosition,g=p[c.hrzPage-1],h=e(c),i=1===c.hrzPage?0:r;d.css({position:"fixed",top:f.top-g+i+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px",transition:"transform "+h+"s, opacity "+h+"s","-webkit-transition":"-webkit-transform "+h+"s, opacity "+h+"s"}),a("#hrz-page-"+c.hrzPage).append(d)}),c.addClass("hrz-element hrz-fore"),d=p[p.length-1]+f,a("body").height(d),q.displayScrollbar||a("body").css("overflow-y","hidden"),a("#hrz-container > *").not(".hrz-page").filter(":visible").remove()}function e(a){var b;return b="random"===q.stagger?.5*Math.random()+.7:"sequence"===q.stagger?Math.log(a.pageOrder+2):1,b/q.transitionSpeed}function f(b){for(var c=1;o>=c;c++)b>c?a("#hrz-page-"+c).addClass("hrz-back"):c>b?a("#hrz-page-"+c).addClass("hrz-fore"):a("#hrz-page-"+c).removeClass("hrz-fore hrz-back");m.each(function(c,d){d.hrzPage<b?a(d).addClass("hrz-back"):b<d.hrzPage?a(d).addClass("hrz-fore"):a(d).removeClass("hrz-fore hrz-back")})}function g(){var b;q.customCssFile&&(b=a("#hrz-custom-css"),0<b.length?b.attr("href",q.customCssFile):a("head").append('<link rel="stylesheet" id="hrz-custom-css" href="'+q.customCssFile+'" type="text/css" />'))}function h(){a("body").replaceWith(l.clone()),m=a(q.selector).filter(":visible"),d(m),f(n)}function i(a,b){var c;return function(){clearTimeout(c),c=setTimeout(function(){a()},b)}}function j(c){var d;40===c.which||39===c.which?n!==o&&(d=p[n]+10):(38===c.which||37===c.which)&&(d=1===n?p[n-1]:p[n-2]),void 0!==d&&a(b).scrollTop(d)}function k(){var c=a(b).scrollTop(),d=0===n?0:p[n-1],e=p[n];d>c?(n--,f(n)):c>e&&(n++,f(n))}var l,m,n,o,p,q,r=0,s={selector:"body *:not(:has(*))",stagger:"random",transitionSpeed:1,customCssFile:!1,displayScrollbar:!0};return a(b).on("resize",i(h,500)),a(b).on("keydown",j),a(b).on("scroll",k),{init:c}}(jQuery,window,document);