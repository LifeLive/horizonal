/*! horizonal 07-07-2014 */
var horizonal=function(a,b){function c(b){m=a.extend({},o,b),j=1,h=a("body").clone(),i=a(m.selector).filter(":visible"),d(i),g(),f(j)}function d(c){var d,f,g=0;f=a(b).height()-2*n,l=[0],k=1,a("body").wrapInner('<div id="hrz-container"></div>'),c.each(function(b,c){var d,e=a(c),h=e.offset().left,i=e.offset().top-parseInt(e.css("margin-top")),j=e.width(),m=e.height(),n=i+m;void 0!==l[k]?l[k]<n&&(d=void 0===l[k-1]?0:l[k-1],n>d+f?(k++,g=0):l[k]=n):l[k]=n,e.addClass("hrz-page-"+k),c.hrzPage=k,c.pageOrder=g,g++,c.hrzCssPosition={top:i,left:h,width:j,height:m}}),a.each(l,function(b){0!==b&&a("#hrz-container").prepend('<div class="hrz-page" id="hrz-page-'+b+'" />')}),c.each(function(b,c){var d=a(c),f=c.hrzCssPosition,g=l[c.hrzPage-1],h=e(c),i=1===c.hrzPage?0:n;d.css({position:"fixed",top:f.top-g+i+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px",transition:"transform "+h+"s, opacity "+h+"s","-webkit-transition":"-webkit-transform "+h+"s, opacity "+h+"s"}),a("#hrz-page-"+c.hrzPage).append(d)}),c.addClass("hrz-element hrz-fore"),d=l[l.length-1]+f,a("body").height(d),m.displayScrollbar||a("body").css("overflow-y","hidden")}function e(a){var b;return b="random"===m.stagger?.5*Math.random()+.7:"sequence"===m.stagger?Math.log(a.pageOrder+2):1,b/m.transitionSpeed}function f(b){for(var c=1;k>=c;c++)b>c?a("#hrz-page-"+c).addClass("hrz-back"):c>b?a("#hrz-page-"+c).addClass("hrz-fore"):a("#hrz-page-"+c).removeClass("hrz-fore hrz-back");i.each(function(c,d){d.hrzPage<b?a(d).addClass("hrz-back"):b<d.hrzPage?a(d).addClass("hrz-fore"):a(d).removeClass("hrz-fore hrz-back")})}function g(){m.customCssFile&&(0<a("#hrz-custom-css").length?a("#hrz-custom-css").attr("href",m.customCssFile):a("head").append('<link rel="stylesheet" id="hrz-custom-css" href="'+m.customCssFile+'" type="text/css" />'))}var h,i,j,k,l,m,n=20,o={selector:"body *:not(:has(*))",stagger:"random",transitionSpeed:1,customCssFile:!1,displayScrollbar:!0};return a(b).on("resize",function(){void 0!==i&&(a("body").replaceWith(h.clone()),i=a(m.selector).filter(":visible"),d(i),f(j))}),a(b).on("scroll",function(){var c=a(b).scrollTop(),d=0===j?0:l[j-1],e=l[j];d>c?(j--,f(j)):c>e&&(j++,f(j))}),a(b).on("keydown",function(c){var d;40===c.which||39===c.which?j!==k&&(d=l[j]+10):(38===c.which||37===c.which)&&(d=1===j?l[j-1]:l[j-2]),void 0!==d&&a(b).scrollTop(d)}),{init:c}}(jQuery,window,document);